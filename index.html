<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تقديمات VayronMC Server</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<style>
* {margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif;}
body {background: linear-gradient(120deg,#1a1a2e,#162447,#1f4068);color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:center;overflow-x:hidden;}
.container {background: rgba(0,0,0,0.85);padding:40px;border-radius:20px;width:90%;max-width:900px;text-align:center;animation: fadeIn 2s ease;box-shadow: 0 0 30px rgba(0,255,255,0.5);}
h1 {margin-bottom:30px; color:#00ffff; animation: glow 2s infinite alternate;}
input, textarea, button, select {width:100%; padding:10px 15px; margin:10px 0; border:none; border-radius:10px; outline:none; font-size:16px;}
input, textarea, select {background: rgba(255,255,255,0.1); color:#fff;}
button {background: linear-gradient(90deg,#00ffff,#ff00ff); color:#000; font-weight:bold; cursor:pointer; transition:0.3s;}
button:hover {transform: scale(1.05); box-shadow:0 0 20px #ff00ff;}
textarea {resize:none;}
@keyframes fadeIn {from{opacity:0; transform:translateY(-50px);} to{opacity:1; transform:translateY(0);}}
@keyframes glow {0%{text-shadow:0 0 10px #00ffff,0 0 20px #00ffff;} 50%{text-shadow:0 0 20px #ff00ff,0 0 40px #ff00ff;} 100%{text-shadow:0 0 10px #00ffff,0 0 20px #00ffff;}}
.tab {display:flex; justify-content:center; gap:20px; margin-bottom:20px;}
.tab button {width:auto; padding:10px 20px;}
.hidden {display:none;}
#registeredPlayers {margin-top:20px; background: rgba(255,255,255,0.1); padding:10px; border-radius:10px; max-height:150px; overflow-y:auto;}
</style>
</head>
<body>

<div class="container">
<h1>تقديمات VayronMC Server</h1>

<div class="tab">
<button onclick="showTab('register')">تسجيل لاعب</button>
<button onclick="showTab('apply')">تقديم</button>
</div>

<div id="register" class="tabContent">
<input type="text" placeholder="ضع اسمك" id="playerName" required>
<button onclick="registerPlayer()">تسجيل</button>
<div id="registerSuccess" style="color:#0f0; font-weight:bold; display:none;">تم التسجيل! ✅</div>
<div id="registerError" style="color:#f00; font-weight:bold; display:none;">الاسم موجود مسبقًا!</div>
<div id="registeredPlayers"><strong>اللاعبين المسجلين:</strong><ul id="playerList"></ul></div>
</div>

<div id="apply" class="tabContent hidden">
<select id="roleSelect" onchange="updateQuestions()">
<option value="Staff">Staff</option>
<option value="Media">Media</option>
<option value="Builder">Builder</option>
</select>

<div id="dynamicQuestions">
<!-- الأسئلة تتغير حسب الدور -->
</div>
<button onclick="sendApplication()">إرسال التقديم</button>
<div id="successMessage" style="display:none; margin-top:20px; color:#0f0; font-weight:bold;">تم إرسال التقديم بنجاح! ✅</div>
</div>

</div>

<script>
let registeredPlayers = [];

function showTab(tab) {
    document.getElementById('register').classList.add('hidden');
    document.getElementById('apply').classList.add('hidden');
    document.getElementById(tab).classList.remove('hidden');
}

function registerPlayer() {
    const name = document.getElementById('playerName').value.trim();
    if(!name) return alert("ضع اسمك");
    if(registeredPlayers.includes(name)) {
        document.getElementById('registerError').style.display='block';
        return;
    }
    registeredPlayers.push(name);
    document.getElementById('playerList').innerHTML = registeredPlayers.map(n => '<li>'+n+'</li>').join('');
    document.getElementById('registerSuccess').style.display='block';
    document.getElementById('registerError').style.display='none';
    document.getElementById('playerName').value='';
}

function updateQuestions(){
    const role = document.getElementById('roleSelect').value;
    let html='';
    if(role==='Staff'){
        html=`
        <input type="text" placeholder="ما هو اسمك؟" required id="name">
        <input type="number" placeholder="عمرك" required id="age">
        <input type="text" placeholder="بلدك" required id="country">
        <input type="text" placeholder="اسمك في ماين كرافت" required id="mcname">
        <textarea placeholder="لماذا تريد أن تصبح Staff؟" required id="about1"></textarea>
        <textarea placeholder="ما هي خبرتك السابقة؟" required id="about2"></textarea>
        `;
    } else if(role==='Media'){
        html=`
        <input type="text" placeholder="ما هو اسمك؟" required id="name">
        <input type="number" placeholder="عمرك" required id="age">
        <input type="text" placeholder="بلدك" required id="country">
        <input type="text" placeholder="اسمك في ماين كرافت" required id="mcname">
        <textarea placeholder="ما الأدوات التي تستخدمها؟" required id="about1"></textarea>
        <textarea placeholder="هل لديك محتوى سابق؟" required id="about2"></textarea>
        `;
    } else if(role==='Builder'){
        html=`
        <input type="text" placeholder="ما هو اسمك؟" required id="name">
        <input type="number" placeholder="عمرك" required id="age">
        <input type="text" placeholder="بلدك" required id="country">
        <input type="text" placeholder="اسمك في ماين كرافت" required id="mcname">
        <textarea placeholder="هل لديك مشاريع سابقة؟" required id="about1"></textarea>
        <textarea placeholder="ما نوع البناء المفضل لديك؟" required id="about2"></textarea>
        `;
    }
    document.getElementById('dynamicQuestions').innerHTML = html;
}
updateQuestions();

(function(){ emailjs.init("YOUR_EMAILJS_USERID"); })();

function sendApplication() {
    const role = document.getElementById('roleSelect').value;
    const name = document.getElementById('name').value;
    const age = document.getElementById('age').value;
    const country = document.getElementById('country').value;
    const mcname = document.getElementById('mcname').value;
    const about1 = document.getElementById('about1').value;
    const about2 = document.getElementById('about2').value;

    if(!name||!age||!country||!mcname||!about1||!about2) return alert("الرجاء تعبئة كل الحقول");

    const templateParams={
        to_email:"saadbouzidi556@gmail.com",
        role, name, age, country, mcname, about1, about2
    };

    emailjs.send('YOUR_SERVICE_ID','YOUR_TEMPLATE_ID', templateParams)
    .then(function(response){
        document.getElementById('successMessage').style.display='block';
        document.getElementById('dynamicQuestions').innerHTML='';
        updateQuestions();
    }, function(error){ alert("حدث خطأ، حاول مرة أخرى"); console.log(error); });
}
</script>

</body>
</html>
